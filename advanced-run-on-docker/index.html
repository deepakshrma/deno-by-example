<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.60">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-172955705-1","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@500&family=Open+Sans&display=swap"><title data-react-helmet="true">Run Deno Application on docker | Continuous Integration and Deployment | Deno By Example</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Run Deno Application on docker | Continuous Integration and Deployment | Deno By Example"><meta data-react-helmet="true" name="description" content="Overview"><meta data-react-helmet="true" property="og:description" content="Overview"><meta data-react-helmet="true" property="og:url" content="https://decipher.dev/deno-by-example/advanced-run-on-docker"><link data-react-helmet="true" rel="shortcut icon" href="/deno-by-example/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://decipher.dev/deno-by-example/advanced-run-on-docker"><link rel="stylesheet" href="/deno-by-example/styles.32c9171d.css">
<link rel="preload" href="/deno-by-example/styles.bdc14fe9.js" as="script">
<link rel="preload" href="/deno-by-example/runtime~main.fd7c0227.js" as="script">
<link rel="preload" href="/deno-by-example/main.085dfc59.js" as="script">
<link rel="preload" href="/deno-by-example/1.c4b12f48.js" as="script">
<link rel="preload" href="/deno-by-example/2.98361bc9.js" as="script">
<link rel="preload" href="/deno-by-example/22.1f555c7b.js" as="script">
<link rel="preload" href="/deno-by-example/23.72d49082.js" as="script">
<link rel="preload" href="/deno-by-example/74cb6e4a.8e12d1c0.js" as="script">
<link rel="preload" href="/deno-by-example/17896441.d5bee96a.js" as="script">
<link rel="preload" href="/deno-by-example/34b74a05.858702a9.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top navbarHideable_3046"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a href="https://decipher.dev/" target="_self" rel="noopener noreferrer" class="navbar__brand"><img class="navbar__logo" src="https://deno.land/logo.svg" alt="Deno By Example"><strong class="navbar__title"></strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/deno-by-example/">Deno By Example</a><a class="navbar__item navbar__link" href="/deno-by-example/getting-started">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/deepakshrma/deno-by-example" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx moon_6SPT"></span></div><div class="react-toggle-track-x"><span class="toggle_BsTx sun_152_"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a href="https://decipher.dev/" target="_self" rel="noopener noreferrer" class="navbar__brand"><img class="navbar__logo" src="https://deno.land/logo.svg" alt="Deno By Example"><strong class="navbar__title"></strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/deno-by-example/">Deno By Example</a></li><li class="menu__list-item"><a class="menu__link" href="/deno-by-example/getting-started">Docs</a></li><li class="menu__list-item"><a href="https://github.com/deepakshrma/deno-by-example" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC sidebarWithHideableNavbar_2IoJ"><a href="https://decipher.dev/" target="_self" rel="noopener noreferrer" tabindex="-1" class="sidebarLogo_Snse"><img src="https://deno.land/logo.svg" alt="Deno By Example"><strong></strong></a><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menuLinkText_2zSB">Basic</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/deno-by-example/getting-started">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/deno-by-example/02-greet-from-cli">Greet From CLI</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/deno-by-example/01-hello-world">Hello World</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/deno-by-example/advanced-routing">Routing From Scratch</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/deno-by-example/advanced-cli-minifind">Build MiniFind CLI</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/deno-by-example/advanced-react-ssr">Isomorphic App</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/deno-by-example/lottery-game">Lottery Game</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/deno-by-example/03-numbers">Numbers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/deno-by-example/05-variables-constants">Variables and Constants</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_2zSB">Advanced</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/deno-by-example/advanced-jq">Implementing JQ</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/deno-by-example/advanced-readline">Read Line by Line</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/deno-by-example/advanced-logger">Implementing Logger</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/deno-by-example/advanced-run-on-docker">Run Deno Application on docker</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Run Deno Application on docker | Continuous Integration and Deployment</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="overview"></a>Overview<a aria-hidden="true" tabindex="-1" class="hash-link" href="#overview" title="Direct link to heading">#</a></h2><p>Before starting code, Lets understand the concept of CICD in brief. This will give us motive to read this blog further.</p><blockquote><p>By- ThoughtWorks‚Äô definition for CI</p></blockquote><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-text codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Continuous Integration (CI) is a development practice that requires developers to integrate code</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">into a shared repository several times a day. Each check-in is then</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">verified by an automated build, allowing teams to detect problems early.</span></div></div></div></div></div><p><strong>Read more:</strong> <a href="https://www.thoughtworks.com/es/continuous-integration" target="_blank" rel="noopener noreferrer">https://www.thoughtworks.com/es/continuous-integration</a></p><blockquote><p>By- Jez Humble‚Äôs site</p></blockquote><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-text codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Continuous Delivery is the ability to get changes of all types‚Äîincluding new features,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">configuration changes, bug fixes and experiments‚Äîinto production, or into</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">the hands of users, safely and quickly in a sustainable way.</span></div></div></div></div></div><p><strong>Read more:</strong> <a href="https://continuousdelivery.com/" target="_blank" rel="noopener noreferrer">https://continuousdelivery.com/</a></p><p>As we can see, There are many reason why we should follow the <strong>CICD</strong> in our project development cycle. The one of reason why i follow CICD in daily work. Its <strong>ease</strong> my work and I get a <strong>consistant environment</strong> for my development work. So that i can focus on more good things rather than <em>debuging</em> Binary <strong>breaking issue</strong>.</p><p>If you want to read more on CICD, You can read this <a href="https://stackify.com/what-is-cicd-whats-important-and-how-to-get-it-right/" target="_blank" rel="noopener noreferrer">article</a>.</p><p><img src="https://www.printwand.com/blog/media/2012/01/ultimate-guide-to-your-product-launch.jpg" alt="p"></p><p><em>In this tutorial, I will mainly focus on how you can setup Simple Deno Web Application just using some docker commands. In next tuitor, I will explain how to setup a FullStack Deno Application.</em></p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="1-create-a-simple-deno-webapp"></a>1. Create a simple Deno WebApp<a aria-hidden="true" tabindex="-1" class="hash-link" href="#1-create-a-simple-deno-webapp" title="Direct link to heading">#</a></h2><p>To show working example, We need to create a sample Application. Since the focus of this tutorial is not to create WebApp. I will recoomend you to checkout my tutorial <a href="/deno-by-example/advanced-react-ssr">here</a> or <a href="https://medium.com/@deepak_v/build-an-isomorphic-application-using-deno-and-react-without-webpack-deno-by-example-6c748abb3243?source=friends_link&amp;sk=335ff7c133a790bb977d0077a322f3cd" target="_blank" rel="noopener noreferrer">medium</a>.</p><p>The given app is a SSR app, has only some basic functionality. You can checkout source in <a href="https://github.com/deepakshrma/deno-by-example/tree/master/examples/ssr" target="_blank" rel="noopener noreferrer">/examples/ssr</a> folder. Once you run app, Open <a href="http://localhost:8000/" target="_blank" rel="noopener noreferrer">http://localhost:8000/</a> on browser. You will see Web as given below.</p><p><img src="https://raw.githubusercontent.com/deepakshrma/deno-by-example/master/static/img/todo_demo.gif" alt="todo gif"></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> examples/ssr</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">deno run --allow-net --allow-read --unstable server.tsx -c tsconfig.json</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="2-create-a-dockerfile"></a>2. Create a <code>Dockerfile</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#2-create-a-dockerfile" title="Direct link to heading">#</a></h2><p>App looks good! Let&#x27;s now create a Dockerfile to startwith.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">md docker-app </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">touch</span><span class="token plain"> Dockerfile</span></div></div></div></div></div><p>To test our docker is working fine, Let&#x27;s add some <strong>Hello World</strong> program.</p><div class="mdxCodeBlock_1XEh"><div style="color:#bfc7d5;background-color:#292d3e" class="codeBlockTitle_3nn1">Dockerfile</div><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd undefined">Copy</button><div tabindex="0" class="prism-code language-docker codeBlock_3iAC codeBlockWithTitle_3QsD"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">FROM alpine</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">RUN echo &quot;Hello Stanger!&quot;</span></div></div></div></div></div><p><strong>Build and Run:</strong></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker build -t chucknorris </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker run -it chucknorris</span></div></div></div></div></div><p><strong>Explaination:</strong> Here in above <em>Dockerfile</em>, First We are pulling the lightest linux base OS. Once pull done, We are trying to Run <em>echo command</em>. If all good, you will see below output.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-text codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ---&gt; Running in 5215187d3d6a</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Hello Stanger!</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Removing intermediate container 5215187d3d6a</span></div></div></div></div></div><p>The above output tell us, things are OK.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="3-install-deno-using-docker"></a>3. Install Deno Using docker<a aria-hidden="true" tabindex="-1" class="hash-link" href="#3-install-deno-using-docker" title="Direct link to heading">#</a></h2><p>By default, Alpine image does not have any external software. This is the one of the thinest Linux client. To install Deno, We need to curl Deno binary. You can read all the details on <a href="https://deno.land/#installation" target="_blank" rel="noopener noreferrer">Deno WebSite</a>.</p><p>Let&#x27;s add <em>curl</em> using Dockerfile.</p><div class="mdxCodeBlock_1XEh"><div style="color:#bfc7d5;background-color:#292d3e" class="codeBlockTitle_3nn1">Dockerfile</div><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd undefined">Copy</button><div tabindex="0" class="prism-code language-docker codeBlock_3iAC codeBlockWithTitle_3QsD"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">FROM alpine</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">RUN apk update &amp;&amp; apk add curl</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">ENTRYPOINT [&quot;curl&quot;]</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">CMD [ &quot;curl&quot;, &quot;https://api.chucknorris.io/jokes/random&quot; ]</span></div></div></div></div></div><p><strong>Build and Run:</strong></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker build -t chucknorris </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker run -it chucknorris</span></div></div></div></div></div><p>Once you run you will see output along with <em>chucknorris</em> joke. I got mine joke as <em>&quot;Chuck Norris once threw a &#x27;block party&#x27;. The city of Detroit filed for bankruptcy the next day&quot;</em>. If your are lucky, You may get more funnier joke.</p><p><strong>Download Deno Binary:</strong>
Now time to <em>install/download</em> <strong>pre-compile</strong> version of Deno binary</p><div class="mdxCodeBlock_1XEh"><div style="color:#bfc7d5;background-color:#292d3e" class="codeBlockTitle_3nn1">Dockerfile</div><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd undefined">Copy</button><div tabindex="0" class="prism-code language-docker codeBlock_3iAC codeBlockWithTitle_3QsD"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">FROM alpine</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">RUN apk update &amp;&amp; apk add curl</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">RUN curl -fsSL https://deno.land/x/install/install.sh | sh &amp;&amp; mv /root/.deno/bin/deno /bin/deno</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">ENTRYPOINT [&quot;dono&quot;]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">CMD [&quot;run&quot;, &quot;--allow-net&quot;, &quot;https://deno.land/std/examples/welcome.ts&quot;]</span></div></div></div></div></div><p><strong>Build and Run:</strong></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker build -t deno-app </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker run -it deno-app</span></div></div></div></div></div><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Issue</h5></div><div class="admonition-content"><p>There are some compiled libraries missing on <strong>Alpine image</strong>. So when you try to run Deno you may can see error like <strong>standard_init_linux.go:211: exec user process caused</strong>. To fix above error, We will you modified version of Alpine Image.</p></div></div><p>Let&#x27;s update our docker file.</p><div class="mdxCodeBlock_1XEh"><div style="color:#bfc7d5;background-color:#292d3e" class="codeBlockTitle_3nn1">Dockerfile</div><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd undefined">Copy</button><div tabindex="0" class="prism-code language-docker codeBlock_3iAC codeBlockWithTitle_3QsD"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">FROM frolvlad/alpine-glibc:alpine-3.11_glibc-2.31</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">RUN apk update &amp;&amp; apk add curl</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">RUN curl -fsSL https://deno.land/x/install/install.sh | sh &amp;&amp; mv /root/.deno/bin/deno /bin/deno</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">ENTRYPOINT [&quot;deno&quot;]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">CMD [&quot;run&quot;, &quot;--allow-net&quot;, &quot;https://deno.land/std/examples/welcome.ts&quot;]</span></div></div></div></div></div><p><strong>Explaination:</strong> Once we pulled the image, We used curl to get the <em>installation script</em> from Deno website and download <em>Deno binary</em>. Since default path of deno binary is not <em>bin</em>. So we need to copy binary to bin. You can find better way to setup path.
<em>ENTRYPOINT</em> is to tell docker what command to use when we run docker run command. <em>CMD</em> is the command to run.</p><p>If all OK, you will see bellow output.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-text codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">‚ùØ docker run -it deno-app</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Download https://deno.land/std/examples/welcome.ts</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Warning Implicitly using latest version (0.64.0) for https://deno.land/std/examples/welcome.ts</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Download https://deno.land/std@0.64.0/examples/welcome.ts</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Check https://deno.land/std@0.64.0/examples/welcome.ts</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Welcome to Deno ü¶ï</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="4-running-todo-app"></a>4. Running Todo App<a aria-hidden="true" tabindex="-1" class="hash-link" href="#4-running-todo-app" title="Direct link to heading">#</a></h2><p>We have completed our 90% job. Let&#x27;s run our <em>todo-app</em>. For that, we need to copy all the required files to the docker image. We can do either using <em>COPY</em> command or mount volume. I will show both way of doing it. However, recoomended is to use <code>COPY</code>. This is to decouple your sytem from Docker.</p><p><strong>Using COPY:</strong></p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Forbidden path outside the build context</h5></div><div class="admonition-content"><p>Since docker does not allow file to be coppied from out of the foder. We have to copy files from <a href="https://github.com/deepakshrma/deno-by-example/tree/master/examples/ssr/" target="_blank" rel="noopener noreferrer">/examples/ssr</a> folder to <a href="https://github.com/deepakshrma/deno-by-example/tree/master/examples/docker-app" target="_blank" rel="noopener noreferrer">examples/docker-app</a>.</p></div></div><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token builtin class-name" style="color:rgb(255, 203, 107)">pwd</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#something/examples/docker-app</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">cp</span><span class="token plain"> -r </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">/ssr ./ssr</span></div></div></div></div></div><p>Update Dockerfile to copy files.</p><div class="mdxCodeBlock_1XEh"><div style="color:#bfc7d5;background-color:#292d3e" class="codeBlockTitle_3nn1">Dockerfile</div><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd undefined">Copy</button><div tabindex="0" class="prism-code language-docker codeBlock_3iAC codeBlockWithTitle_3QsD"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">FROM frolvlad/alpine-glibc:alpine-3.11_glibc-2.31</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">RUN apk update &amp;&amp; apk add curl</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">RUN curl -fsSL https://deno.land/x/install/install.sh | sh &amp;&amp; mv /root/.deno/bin/deno /bin/deno</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">WORKDIR /app</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">COPY ssr/ /app/</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">ENTRYPOINT [&quot;deno&quot;]</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">CMD [&quot;run&quot;, &quot;--allow-net&quot;, &quot;--allow-read&quot;, &quot;--unstable&quot;, &quot;server.tsx&quot;, &quot;-c&quot;, &quot;tsconfig.json&quot;]</span></div></div></div></div></div><p><strong>Build and Run:</strong></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker build -t deno-app </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">.</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">docker run -d deno-app</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">## output</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># f75f6e55675b1f8558fcfe2c34cd25f366aacc4b0f6b5df7d7982bf3cea3c46d</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">## Note down the output of last command</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">docker logs f75f6e55675b</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>If you notice, for first time we have run docker in <strong>detteched</strong> mode ie. <code>docker run -d</code>. Since we are running a <strong>long running server</strong>, We should dettached the Docket image from our sytem.</p></div></div><p><strong>Explaination:</strong> Since we are running docker container in detteched mode. We have to grab <strong>container-id</strong> to see logs of the last docker run.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker </span><span class="token function" style="color:rgb(130, 170, 255)">ps</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">grep</span><span class="token plain"> todo-app</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker logs f75f6e55675b</span></div></div></div></div></div><p>You can see output like <em>server is running on http://localhost:8000/</em>. However, when you try to access <a href="http://localhost:8000/" target="_blank" rel="noopener noreferrer">http://localhost:8000/</a> on browser. You cant access it. This is becuase docker runs container in <em>isolation</em>. It does not <em>implecite</em> expose ports out of the container. To do so, We have to <em>expose port</em> in docker file and same time need <em>bind to</em> external port while running command.</p><div class="mdxCodeBlock_1XEh"><div style="color:#bfc7d5;background-color:#292d3e" class="codeBlockTitle_3nn1">Dockerfile</div><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd undefined">Copy</button><div tabindex="0" class="prism-code language-docker codeBlock_3iAC codeBlockWithTitle_3QsD"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">## rest of the command</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">WORKDIR /app</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">EXPOSE 8080</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">COPY ssr/ /app/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">## rest of the command</span></div></div></div></div></div><p><strong>Build and run with port binding:</strong></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker build -t deno-app </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker run -d -p8000:8000 deno-app</span></div></div></div></div></div><p>Open <a href="http://localhost:8000/" target="_blank" rel="noopener noreferrer">http://localhost:8000/</a> in browser, You can see running todo app.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="bonus"></a>Bonus<a aria-hidden="true" tabindex="-1" class="hash-link" href="#bonus" title="Direct link to heading">#</a></h2><p>I told you, That you can run file without COPY command using valume mount. For that lets remove COPY commad from Dockerfile.</p><div class="mdxCodeBlock_1XEh"><div style="color:#bfc7d5;background-color:#292d3e" class="codeBlockTitle_3nn1">Dockerfile</div><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd undefined">Copy</button><div tabindex="0" class="prism-code language-docker codeBlock_3iAC codeBlockWithTitle_3QsD"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">FROM frolvlad/alpine-glibc:alpine-3.11_glibc-2.31</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">RUN apk update &amp;&amp; apk add curl</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">RUN curl -fsSL https://deno.land/x/install/install.sh | sh &amp;&amp; mv /root/.deno/bin/deno /bin/deno</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">WORKDIR /app</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">EXPOSE 8080</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">ENTRYPOINT [&quot;deno&quot;]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">CMD [&quot;run&quot;, &quot;--allow-net&quot;, &quot;--allow-read&quot;, &quot;--unstable&quot;, &quot;server.tsx&quot;, &quot;-c&quot;, &quot;tsconfig.json&quot;]</span></div></div></div></div></div><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker build -t deno-app </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker run -d -p8000:8000 -v </span><span class="token variable" style="color:rgb(191, 199, 213)">${</span><span class="token variable environment constant" style="color:rgb(130, 170, 255)">PWD</span><span class="token variable" style="color:rgb(191, 199, 213)">}</span><span class="token plain">/ssr:/app  deno-app</span></div></div></div></div></div><p><strong>Hope you like this tutorial. Please follow me and clap for me on medium:</strong> <a href="https://medium.com/@deepak_v/" target="_blank" rel="noopener noreferrer">https://medium.com/@deepak_v</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="some-usefull-docker-commands"></a>Some Usefull Docker Commands<a aria-hidden="true" tabindex="-1" class="hash-link" href="#some-usefull-docker-commands" title="Direct link to heading">#</a></h2><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Docker</h5></div><div class="admonition-content"><p>Docker Images: <code>docker images ls</code></p><p>Running Process: <code>docker ps</code></p><p>Stop container: <code>docker stop container-id</code></p><p>Stop all container time before: <code>docker ps | grep &quot; minutes ago&quot; | awk &#x27;{print $1}&#x27; | xargs docker stop</code></p><p>Remove images: <code>docker rmi -f id1 id2 id3</code></p><p>Logs: <code>docker logs f75f6e55675b</code></p></div></div><p><strong>Source:</strong></p><p>You can get all source code on GitHub.
<a href="https://github.com/deepakshrma/deno-by-example/tree/master/examples/docker-app" target="_blank" rel="noopener noreferrer">examples/docker-app</a></p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/deepakshrma/deno-by-example/edit/master/docs/advanced_run_on_docker.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/deno-by-example/advanced-logger"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">¬´ Building A Super Cool Colorful Logger with Deno fmt module</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3klQ"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link">Overview</a></li><li><a href="#1-create-a-simple-deno-webapp" class="table-of-contents__link">1. Create a simple Deno WebApp</a></li><li><a href="#2-create-a-dockerfile" class="table-of-contents__link">2. Create a <code>Dockerfile</code></a></li><li><a href="#3-install-deno-using-docker" class="table-of-contents__link">3. Install Deno Using docker</a></li><li><a href="#4-running-todo-app" class="table-of-contents__link">4. Running Todo App</a></li><li><a href="#bonus" class="table-of-contents__link">Bonus</a></li><li><a href="#some-usefull-docker-commands" class="table-of-contents__link">Some Usefull Docker Commands</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Follow me</h4><ul class="footer__items"><li class="footer__item"><a href="https://www.linkedin.com/in/xdeepakv/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Linkdin</a></li><li class="footer__item"><a href="https://medium.com/@deepak_v" target="_blank" rel="noopener noreferrer" class="footer__link-item">Medium.com</a></li><li class="footer__item"><a href="https://discord.com/channels/@deepakv" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Friend with me</h4><ul class="footer__items"><li class="footer__item"><a href="https://twitter.com/nalayakshrma" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li><li class="footer__item"><a href="https://www.instagram.com/nalayaksharma_poetry/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Instagram</a></li><li class="footer__item"><a href="https://unsplash.com/@deepak_v" target="_blank" rel="noopener noreferrer" class="footer__link-item">Unsplash</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Contact me</h4></div></div><div class="text--center"><div>Copyright ¬© 2020 Deepak Vishwakarma</div></div></div></footer></div>
<script src="/deno-by-example/styles.bdc14fe9.js"></script>
<script src="/deno-by-example/runtime~main.fd7c0227.js"></script>
<script src="/deno-by-example/main.085dfc59.js"></script>
<script src="/deno-by-example/1.c4b12f48.js"></script>
<script src="/deno-by-example/2.98361bc9.js"></script>
<script src="/deno-by-example/22.1f555c7b.js"></script>
<script src="/deno-by-example/23.72d49082.js"></script>
<script src="/deno-by-example/74cb6e4a.8e12d1c0.js"></script>
<script src="/deno-by-example/17896441.d5bee96a.js"></script>
<script src="/deno-by-example/34b74a05.858702a9.js"></script>
</body>
</html>